<?xml version="1.0"?>
<!-- generated by nwutil0001#0.3.beta -->
<project name="bananamark-mobile" default="help" basedir="." xmlns:x="antlib:net.sourceforge.ant4x" xmlns:if="ant:if" xmlns:unless="ant:unless">

    <property environment="myenv" />
    <property name="root.dir" value=".." />
    <property name="cordova.dir" value="cordova" />
    <property name="dev.dir" value="${root.dir}/dev" />
    <property name="dist.dir" value="${root.dir}/dist" />

    <!-- HELP -->
    <target name="help" description="Print help">
        <echo message="Usage: ant [target] [-Dproperty=value...]" />
        <echo message="" />
        <echo message="targets :" />
        <echo message="> ant cordova-create" />
        <echo message="  create cordova project" />
        <echo message="> ant cordova-build" />
        <echo message="  build cordova project" />
        <echo message="> ant all" />
        <echo message="  generate all" />
    </target>

    <target name="create-cordova" description="create cordova">
        <x:cordova dir="${cordova.dir}" create="bananamark" domain="com.numeriware"/>
    </target>

    <target name="build-cordova" description="build cordova">
        <!-- todo: current dir -->
        <available file="dist/bananamark/cordova/config.xml" property="cordova_already_installed"/>
        <antcall unless:set="cordova_already_installed" target="cordova-create"/>

        <ant antfile="${dev.dir}/build.xml" target="deploy-mobile"/>

        <x:cordova dir="${cordova.dir}" build="android">
            <pluginset dir="${dev.dir}/src/cordova/plugins">
                <include name="bananamark"/>
            </pluginset>
        </x:cordova>
        <copy file="${cordova.dir}/platforms/android/build/outputs/apk/android-debug.apk" tofile="${dist.dir}/bananamark-debug.apk" overwrite="true"/>
        <copy file="${cordova.dir}/platforms/android/build/outputs/apk/android-release-unsigned.apk" tofile="${dist.dir}/bananamark-release-unsigned.apk" overwrite="true"/>
    </target>
	
	<target name="hardwareAccelerated">
		<replace dir="cordova/platforms/android" value="android:hardwareAccelerated='false'">			
			<include name="**/AndroidManifest.xml"/>
			<replacetoken>android:hardwareAccelerated="true"</replacetoken>
		</replace>
	</target>
	
	<target name="copy">
		<copy todir="../dev/src/cordova/plugins" overwrite="true">
          <fileset dir="cordova/plugins/">    
		    <include name="com.ionic.keyboard/**/*.java"/>			
          </fileset>
       </copy>
	</target>
	

</project>

